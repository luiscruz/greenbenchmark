# Green Benchmarking

Mobile and wearable devices are nowadays the de facto personal computers, while desktop computers are becoming less popular. Therefore, it is important for companies to deliver energy-efficient mobile applications. We studied whether or not a set of best performance-based practices have an impact on the energy consumed by Android applications. In an experimental study with six popular mobile applications, we observed that the battery of the mobile device can last up to approximately an extra hour if the applications are developed with energy-aware practices. This work paves the way for a set of guidelines for energy-aware automatic refactoring techniques.

## Apps

- [Loop - Habit Tracker](https://play.google.com/store/apps/details?id=org.isoron.uhabits&hl=en)
- [Writeily Pro](https://play.google.com/store/apps/details?id=me.writeily&hl=en)
- [Talalarmo Alarm Clock](https://play.google.com/store/apps/details?id=trikita.talalarmo&hl=en)
- [GnuCash](https://play.google.com/store/apps/details?id=org.gnucash.android&hl=en)
- [Acrylic Paint](https://f-droid.org/repository/browse/?fdid=anupam.acrylic)
- [Simple Gallery](https://play.google.com/store/apps/details?id=com.simplemobiletools.gallery&hl=en)

## Studied Anti-Patterns

- DrawAllocation
- Wakelock
- Recycle
- ObsoleteLayoutParam
- ViewHolder
- Overdraw
- UnusedResources
- UselessParent

## How to run scripts

### Run experiments
1. Connect your ODROID to you computer (other devices also work but you will not be able to collect power data)
1. Create the file ```experiment_stack.csv```. Each line has name of experiment, package name of the app, path to the apk, interaction test data file. E.g.: ```writeily-pro,me.writeily,apks/writeily-pro.apk,writely-pro-view_holder_cache.json```.
The experiment stacks used in the experiments are also available in this repository.
1. ```$ sh run_experiment_stack.sh```

### Generate reports

After having results reports can be generated by running:

```$ python report_all_results.py results_writeily-pro```

### ODROID energy collection script

Collection of power data is made using the shell script ```odroid_energy_monitor.sh```.
It has to be executed by the ODROID device and outputs power data in the file ```/sdcard/energy/energy_log.csv```.
This is automatically handled when running the script ```run_experiment_stack.sh```.

We internally use ADB to automatically upload the script and run it on ODROID.

### Interaction Scripts

Interaction scripts are stored in ```./tests/```.
In order to run you can simply run:

```
$ python acrylicpaint.py
```

Make sure you have your Android device connected to your computer and USB debugging mode activated.
Your app has to be previously installed and running in foreground.

This script generates a cache file (e.g., run_cached_script.json), to optimize further executions.
You can use this cache by running
```
$ python run_cached_script.py tests/run_cached_script.json
```

## Publications

- Luis Cruz and Rui Abreu (2017). [Performance-based Guidelines for Energy Efficient Mobile Applications](https://luiscruz.github.io/papers/cruz2017performance.pdf). In IEEE/ACM International Conference on Mobile Software Engineering and Systems, MOBILESoft.

## Contact

For more information feel free to contact:

- Luis Cruz - luiscruz@fe.up.pt
- Rui Abreu - rui@computer.org
